version: 2

seeds:
  - name: bill_type
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema:  "{{ var('terminology_schema') }}"
      column_types:
        CODE: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}

  - name: claim_type
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"

  - name: discharge_disposition
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"
      column_types:
        discharge_disposition_code: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}

  - name: gender
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"

  - name: icd_10_cm
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"

  - name: ms_drg
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"
      column_types:
        CODE: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}

  - name: place_of_service
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"
      column_types:
        place_of_service_code: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}

  - name: present_on_admission
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"

  - name: revenue_center_code
    description: Dataset from the Tuva Terminology repo
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"
      column_types:
        revenue_center_code: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}

  - name: test_catalog
    description: A complete list of all data profiling tests
    config:
      database: "{{ var('output_database') }}"
      schema: "{{ var('terminology_schema') }}"
      column_types:
        test_id: |
          {%- if target.type == "bigquery" -%} string
          {%- else -%} varchar
          {%- endif -%}
    columns:
      - name: test_id
        description: Unique identifier for the test
        tests:
          - unique
          - not_null
      - name: test_name
        description: >
          Unique column name of the test in the format 
          "[test type]_[field name]_[table]" or 
          "[test type]_[table]" if test is unique
        tests:
          - unique
          - not_null
      - name: test_description
        description: Guideline or reasoning for the test
      - name: detail_table_name
        description: The name of the data profiling detail table
      - name: source_table_name
        description: The name of the source table the test is ran on
      - name: columns
        description: List of column(s) the test is ran on
      - name: grain
        description: >
          Grain the test is ran on (table name or column name), may not always
          be the same as the table grain
      - name: category
        description: >
          Category or class of test (e.g. data type, unique, missing, etc.)
      - name: record_source
        description: >
          Source of records the test is ran on 
          (e.g. all claims, institutional claims, etc.)
      - name: blocking_error
        description: >
          Indicates whether the test is a blocking error for the input layer
